SELECT * FROM TMOV WHERE CODTMV='1.1.05' AND CAMPOLIVRE3='1003-R1'
SELECT * FROM ZMDPLANOAPROVEITAMENTOCORTE WHERE NUMPLANOCORTE='1003-R1'


- A PARTIR DE UMA UM MOVIMENTO DO TIPO 1.1.05, CASO A COLUNA CAMPOLIVRE3 ESTIVER PREENCHIDA, 

- QUER DIZER QUE É UMA RA DE PLANO DE CORTE, E PORTANTO DEVE BAIXAR AUTOMATICAMENTE A MATÉRIA PRIMA AO SER TRANSFERIDA;

- MOVIMENTO DO TIPO 1.1.05 SERÁ FATURADO E IRÁ GERAR O MOVIMENTO 3.1.02 QUE IRÁ TRANSFERIR O SALDO DO LOCAL DE ESTOQUE 22 PARA O 23;

- APÓS TRANSFERIR O LOTE, DEVEM SER GERADOS 1 MOVIMENTO DE BAIXA PARA CADA OP DO PLANO DE CORTE

- IREMOS ATRAVÉS DO MOVIMENTO DE TRANSFERÊNCIA, LOCALIZAR O MOVIMENTO DE REQUISIÇÃO, ATRAVÉS DA [TMOVRELAC]

- APÓS CONSEGUIR O MOVIMENTO DE REQUISIÇÃO, IREMOS UTILIZAR AS COLUNAS [CODCOLIGADA],[CODFILIAL] E [IDMOVREQ] PARA 

- REALIZARMOS UM JOIN ENTRE A TMOV E A TABELA ZMDPLANOAPROVEITAMENTOCORTE 

- A PARTIR DESSA TABELA IREMOS GERAR OS MOVIMENTOS AUTOMATIZADOS


 ######################################        2.2.18        ##################################################


     MOVIMENTO DE BAIXA DE ESTOQUE 

    - NA TABELA TMOV TEMOS O [IDMOV] DA REQUISIÇÃO ( MOVIMENTO 1.1.05 ), ESTE IDMOV ESTÁ NO METADADOS ZMDPLANOAPROVEITAMENTOCORTE NA COLUNA IDMOVREQ;

    - ALÉM DISSO DEVE-SE VINCULAR O CAMPOLIVRE3 DA TMOV A COLUNA NUMPLANOCORTE DO METADADOS, CADA LINHA DO RETORNO DESSE JOIN É UM MOVIMENTO DE BAIXA
    QUE DEVE SER GERADO;

    - PARA GARANTIR A COERÊNCIA DA BAIXA AUTOMÁTICA, IREMOS FAZER TODAS AS VINCULAÇÕES POSSIVEIS NAS TABELAS DE MOVIMENTAÇÃO E DO METADADOS

    - O ID DO LOTE QUE FOI TRANSFERIDO DEVE SER IGUAL A COLUNA IDLOTE DO METADADOS, ASSIM COMO A QUANTIDADE TRANSFERIDA DEVE SER IGUAL A COLUNA QTDEMP do METADADOS
     E A TITMMOV NÃO PODE TER MAIS QUE 1 REGISTRO

    - RESPEITANDO TODAS ESSAS INFORMAÇÕES, DEVEM SER GERADOS OS MOVIMENTOS DE BAIXA UTILIZANDO O LOTE QUE FOI TRANSFERIDO, LEVANDO COMO INFORMAÇÕES IMPORTANTES 
    CAMPOLIVRE1 : CODORDEM -> METADADOS
    CAMPOLIVRE2 : IDATVORDEM -> JOIN COM A KATVORDEM UTILIZANDO CORORDEM E CODATIVIDADE
    CAMPOLIVRE3 : NUMPLANOCORTE -> METADADOS
    QUANTIDADE : QTDMPFINAL -> METADADOS 

   A ULTIMA BAIXA NÃO IRÁ LEVAR O QTDMPFINAL DO METADADOS IRÁ LEVAR  [ A COLUNA [QTDEMP] - ( SOMA DAS QUANTIDADES DAS BAIXAS ANTERIORES ) ] 


 ######################################        1.2.29        ##################################################

    MOVIMENTO DE ENTRADA DE SUCATA 

    - APÓS GERAR TODOS OS MOVIMENTOS DE BAIXA, É NECESSÁRIO TAMBÉM GERAR O MOVIMENTO 1.2.29 QUE É DE ENTRADA DE SUCATA

    - LEVAR CAMPOLIVRE1,CAMPOLIVRE2 E CAMPOLIVRE3  IGUAIS AO DO MOVIMENTO 1.1.05

    - QUANTIDADE DO MOVIMENTO DE ENTRADA DE SUCATA SERÁ A COLUNA QTDESUCATA DO METADADOS 

    - PRODUTO DO MOVIMENTO DE SUCATA SERÁ A COLUNA CODSUCATA DO METADADOS

    - CODLOC É 0 26


 ###################################### VÍNCULO.FACTOR.E.METADADOS #################################################


    - OBS : ESTE BLOCO ABAIXO NÃO PODE OCORRER CASO ALGUM MOVIMENTO ANTERIOR TENHA DADO ERRO, CASO ALGUM MOVIMENTO 
     ANTERIOR TENHA DADO ERRO, TODOS OS ANTERIORES DEVEM SER EXCLUÍDOS                                                                                                

    - APÓS TOTAL BAIXA DO MATERIAL, OS MOVIMENTO DEVEM SER VINCULADOS AS ATIVIDADES DAS ORDENS

    - VINCULAR MOVIMENTOS 2.2.18 E 1.2.29 UTILIZANDO A PROCEDURE SP_CRM_VINCULAMATERIAL - 
     ?  { PARÂMETROS } COLIGADA DO MOVIMENTO, FILIAL DO MOVIMENTO, CAMPOLIVRE1, CAMPOLIVRE2, ID DO MOVIMENTO, DATAEMISSAO DO MOVIMENTO

    - APÓS VINCULAR A BAIXA DO MATERIAL, A COLUNA QTDEAPONTADA DO METADADOS DEVE SER ALIMENTADA COM A INFORMAÇÃO DA 
       COLUNA QUANTIDADE -  ! SOMENTE APÓS FINALIZAR TODAS AS BAIXAS !







    






